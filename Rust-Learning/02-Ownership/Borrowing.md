# üîÑ –ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ (Borrowing) –≤ Rust

–ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–ª–∞–¥–µ–Ω–∏—è –∏–º–∏.

## üéØ –û—Å–Ω–æ–≤—ã –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è

–ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ - —ç—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ–∑ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–ª–∞–¥–µ–Ω–∏—è.

```rust
fn main() {
    let s1 = String::from("hello");
    let len = calculate_length(&s1); // &s1 —Å–æ–∑–¥–∞—ë—Ç —Å—Å—ã–ª–∫—É –Ω–∞ s1
    println!("Length of '{}' is {}", s1, len); // s1 –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç—É–ø–Ω–∞!
}

fn calculate_length(s: &String) -> usize { // s - —ç—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ String
    s.len()
} // s –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏, –Ω–æ –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∞ –Ω–µ –≤–ª–∞–¥–µ–µ—Ç –¥–∞–Ω–Ω—ã–º–∏,
  // –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
```

## üìñ –¢–∏–ø—ã –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è

### 1Ô∏è‚É£ –ù–µ–∏–∑–º–µ–Ω—è–µ–º–æ–µ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ (`&T`)
```rust
let s = String::from("hello");
let r1 = &s; // –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞
let r2 = &s; // –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫
println!("{} and {}", r1, r2); // ‚úÖ OK!
```

### 2Ô∏è‚É£ –ò–∑–º–µ–Ω—è–µ–º–æ–µ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ (`&mut T`)
```rust
let mut s = String::from("hello");
let r1 = &mut s; // –∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞
r1.push_str(", world");
println!("{}", r1); // ‚úÖ OK!
```

## ‚öñÔ∏è –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è

### –ü—Ä–∞–≤–∏–ª–æ 1: –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫
**–ú–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –ª–∏–±–æ –æ–¥–Ω–∞ –∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞, –ª–∏–±–æ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫**

```rust
let mut s = String::from("hello");

// ‚ùå –≠—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
let r1 = &s;     // –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞
let r2 = &s;     // –µ—â—ë –æ–¥–Ω–∞ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞  
let r3 = &mut s; // ‚ùå –û–®–ò–ë–ö–ê! –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É
                 // –∫–æ–≥–¥–∞ –µ—Å—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ

// ‚úÖ –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
let r1 = &s;
let r2 = &s;
println!("{} and {}", r1, r2);
// r1 –∏ r2 –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Å–ª–µ —ç—Ç–æ–π —Ç–æ—á–∫–∏

let r3 = &mut s; // ‚úÖ OK! –ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫ –±–æ–ª—å—à–µ –Ω–µ—Ç
println!("{}", r3);
```

### –ü—Ä–∞–≤–∏–ª–æ 2: –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å—Å—ã–ª–æ–∫
–°—Å—ã–ª–∫–∏ –≤–∞–ª–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏—Ö –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏:

```rust
let mut s = String::from("hello");

let r1 = &s;
let r2 = &s;
println!("{} and {}", r1, r2); // r1 –∏ r2 –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

let r3 = &mut s; // ‚úÖ OK! r1 –∏ r2 –≤—ã—à–ª–∏ –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
println!("{}", r3);
```

## üîç –î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è

```mermaid
graph TD
    A[–í–ª–∞–¥–µ–ª–µ—Ü –¥–∞–Ω–Ω—ã—Ö] --> B[–ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫–∏]
    B --> C[–ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ &T]
    B --> D[–ò–∑–º–µ–Ω—è–µ–º—ã–µ &mut T]
    
    C --> E[–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ OK]
    D --> F[–¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Å—Å—ã–ª–∫–∞ –∑–∞ —Ä–∞–∑]
    
    E --> G[–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ]
    F --> H[–ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å]
    
    style A fill:#ff9999
    style C fill:#99ccff  
    style D fill:#ffcc99
```

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
```rust
fn main() {
    let mut s = String::from("hello");
    change(&mut s);
    println!("{}", s); // "hello, world"
}

fn change(some_string: &mut String) {
    some_string.push_str(", world");
}
```

### –§—É–Ω–∫—Ü–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è–º–∏
```rust
fn main() {
    let s1 = String::from("hello");
    let s2 = String::from("world");
    
    let result = longest(&s1, &s2);
    println!("The longest string is {}", result);
}

fn longest(x: &str, y: &str) -> &str {
    if x.len() > y.len() {
        x
    } else {
        y
    }
}
```

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É
```rust
let s = String::from("hello");
let r = &s;
// r.push_str(", world"); // ‚ùå –û—à–∏–±–∫–∞! r - –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Å—ã–ª–∫–∏
```rust
let mut s = String::from("hello");
let r1 = &mut s;
let r2 = &mut s; // ‚ùå –û—à–∏–±–∫–∞! –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞ –∑–∞ —Ä–∞–∑
println!("{}, {}", r1, r2);
```

### –°–º–µ—à–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫
```rust
let mut s = String::from("hello");
let r1 = &s;     // –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞
let r2 = &mut s; // ‚ùå –û—à–∏–±–∫–∞! –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É
println!("{}, {}", r1, r2); // –ø–æ–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ
```

## üéì –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç data races –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
2. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –°—Å—ã–ª–∫–∏ –Ω–µ –∏–º–µ—é—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è  
3. **–ö–æ–Ω—Ç—Ä–æ–ª—å**: –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã
- [[References]] - –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–∏–ø–∞—Ö —Å—Å—ã–ª–æ–∫
- [[Mutable-References]] - –†–∞–±–æ—Ç–∞ —Å –∏–∑–º–µ–Ω—è–µ–º—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
- [[09-Lifetimes/Lifetimes-Basics]] - –í—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫
- [[Reference-Rules]] - –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å—Å—ã–ª–æ–∫

## üß™ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏

1. –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –≤–µ–∫—Ç–æ—Ä –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –¥–ª–∏–Ω—É
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ —á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É
3. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ —Å –æ—à–∏–±–∫–∞–º–∏ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è

#borrowing #references #memory-safety #core-concept #intermediate