# E0382: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â—ë–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

**–ö–∞—Ç–µ–≥–æ—Ä–∏—è**: Ownership Error  
**–ß–∞—Å—Ç–æ—Ç–∞**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—á–µ–Ω—å —á–∞—Å—Ç–∞—è  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: üü° –°—Ä–µ–¥–Ω—è—è

## üö´ –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤–ª–∞–¥–µ–Ω–∏–µ –∏–º –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–Ω–æ (moved) –≤ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ.

## üí• –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫

### –ë–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π
```rust
let s1 = String::from("hello");
let s2 = s1; // –í–ª–∞–¥–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ s2
println!("{}", s1); // ‚ùå Error: borrow of moved value: `s1`
```

**–°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞:**
```
error[E0382]: borrow of moved value: `s1`
 --> src/main.rs:3:20
  |
1 | let s1 = String::from("hello");
  |     -- move occurs because `s1` has type `String`
2 | let s2 = s1;
  |          -- value moved here  
3 | println!("{}", s1);
  |                ^^ value borrowed here after move
```

### –ü–µ—Ä–µ–¥–∞—á–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é
```rust
fn take_ownership(s: String) {
    println!("{}", s);
} // s –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ —É–¥–∞–ª—è–µ—Ç—Å—è

fn main() {
    let s = String::from("hello");
    take_ownership(s); // s –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—é
    println!("{}", s); // ‚ùå Error: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ move
}
```

### –í —Ü–∏–∫–ª–∞—Ö –∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞—Ö
```rust
let strings = vec![String::from("hello"), String::from("world")];
for s in strings { // strings –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ —Ü–∏–∫–ª
    println!("{}", s);
}
println!("{:?}", strings); // ‚ùå Error: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ move
```

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```rust
let s1 = String::from("hello");
let s2 = s1.clone(); // –°–æ–∑–¥–∞—ë–º –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö
println!("{} {}", s1, s2); // ‚úÖ OK: s1 –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç—É–ø–Ω–∞
```

### 2. –ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
```rust
let s1 = String::from("hello");
let s2 = &s1; // –ó–∞–∏–º—Å—Ç–≤—É–µ–º, –Ω–µ –ø–µ—Ä–µ–º–µ—â–∞–µ–º
println!("{} {}", s1, s2); // ‚úÖ OK: –æ–±–∞ –¥–æ—Å—Ç—É–ø–Ω—ã
```

### 3. –í–æ–∑–≤—Ä–∞—Ç –≤–ª–∞–¥–µ–Ω–∏—è –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
```rust
fn take_and_return(s: String) -> String {
    println!("{}", s);
    s // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤–ª–∞–¥–µ–Ω–∏–µ
}

fn main() {
    let s = String::from("hello");
    let s = take_and_return(s); // –ü–æ–ª—É—á–∞–µ–º –≤–ª–∞–¥–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ
    println!("{}", s); // ‚úÖ OK
}
```

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö
```rust
fn borrow_string(s: &String) {
    println!("{}", s);
}

fn main() {
    let s = String::from("hello");
    borrow_string(&s); // –ü–µ—Ä–µ–¥–∞—ë–º —Å—Å—ã–ª–∫—É
    println!("{}", s); // ‚úÖ OK: s –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç—É–ø–Ω–∞
}
```

### 5. –ò—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Å—Å—ã–ª–∫–∞–º
```rust
let strings = vec![String::from("hello"), String::from("world")];
for s in &strings { // –ò—Ç–µ—Ä–∏—Ä—É–µ–º –ø–æ —Å—Å—ã–ª–∫–∞–º
    println!("{}", s);
}
println!("{:?}", strings); // ‚úÖ OK: strings –Ω–µ –ø–µ—Ä–µ–º–µ—â—ë–Ω
```

## ü§î –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç move?

### Move –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
- –ü—Ä–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–∏: `let b = a;`
- –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é: `function(value)`  
- –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏: `return value;`
- –í pattern matching: `match value { ... }`
- –ü—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏: `vec.push(value)`

### Move –ù–ï –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–ª—è Copy —Ç–∏–ø–æ–≤:
```rust
let x = 5; // i32 —Ä–µ–∞–ª–∏–∑—É–µ—Ç Copy
let y = x; // –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è, –Ω–µ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è
println!("{} {}", x, y); // ‚úÖ OK: x –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç—É–ø–Ω–∞
```

**Copy —Ç–∏–ø—ã:**
- –í—Å–µ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã (i32, u64, –∏ —Ç.–¥.)
- –ë—É–ª–µ–≤ —Ç–∏–ø (bool)
- –í—Å–µ —Ç–∏–ø—ã —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π (f64, f32)
- –°–∏–º–≤–æ–ª—å–Ω—ã–π —Ç–∏–ø (char)
- –ö–æ—Ä—Ç–µ–∂–∏, –µ—Å–ª–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–º–µ—é—Ç Copy

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ö–∞–∫ –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ move:
1. –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
2. –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º `value moved here`
3. –ü—Ä–æ—Å–ª–µ–¥–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–æ –æ—à–∏–±–∫–∏

### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏:
- –ì–¥–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –±—ã–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞?
- –ù—É–∂–Ω–æ –ª–∏ –º–Ω–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è?
- –ú–æ–≥—É –ª–∏ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ –≤–ª–∞–¥–µ–Ω–∏—è?
- –ü–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Å–ª—É—á–∞—è?

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤–ª–∞–¥–µ–Ω–∏—é
```rust
// –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ:
fn process_string(s: String) -> String {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞
    s
}

// –õ—É—á—à–µ —Ç–∞–∫:
fn process_string(s: &str) {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞
}
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã, –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è—é—â–∏–µ self
```rust
// –ü–æ—Ç—Ä–µ–±–ª—è–µ—Ç self
let result = vec.into_iter().collect();

// –ù–µ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç
let result: Vec<_> = vec.iter().cloned().collect();
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ –∫–æ–¥ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ moves
```rust
// –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ: –º–Ω–æ–≥–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
let data = expensive_computation();
process_data_1(data.clone());
process_data_2(data.clone());
process_data_3(data);

// –õ—É—á—à–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Å—ã–ª–∫–∏
let data = expensive_computation();
process_data_1(&data);
process_data_2(&data);  
process_data_3(&data);
```

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥
```rust
fn main() {
    let s = String::from("test");
    let len = calculate_length(s);
    println!("Length of '{}' is {}", s, len); // ‚ùå –ò—Å–ø—Ä–∞–≤—å—Ç–µ
}

fn calculate_length(s: String) -> usize {
    s.len()
}
```

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –†–∞–±–æ—Ç–∞ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏
```rust
fn main() {
    let v = vec![1, 2, 3];
    let first = v[0];
    let v2 = v; // ‚ùå –ß—Ç–æ –∑–¥–µ—Å—å –Ω–µ —Ç–∞–∫?
    println!("First: {}, Vector: {:?}", first, v);
}
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
- [[E0384-Cannot-Assign-Twice]] - –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
- [[E0502-Cannot-Borrow-Mutably]] - –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–π
- [[E0597-Borrowed-Value-Does-Not-Live-Long-Enough]] - –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
- [[02-Ownership/Move-Semantics]] - –°–µ–º–∞–Ω—Ç–∏–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
- [[02-Ownership/Borrowing]] - –ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- [[Clone-Copy-Traits]] - –¢—Ä–µ–π—Ç—ã Copy –∏ Clone

#error-E0382 #ownership #move-semantics #common-error #beginner