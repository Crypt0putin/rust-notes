# ‚è±Ô∏è –í—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ (Lifetimes) –≤ Rust

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞

1. [–ß—Ç–æ —Ç–∞–∫–æ–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏](#—á—Ç–æ-—Ç–∞–∫–æ–µ-–≤—Ä–µ–º–µ–Ω–∞-–∂–∏–∑–Ω–∏)
2. [–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤—Ä–µ–º—ë–Ω –∂–∏–∑–Ω–∏](#–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏-–≤—Ä–µ–º—ë–Ω-–∂–∏–∑–Ω–∏)
3. [–ü—Ä–∞–≤–∏–ª–∞ —ç–ª–∏–∑–∏–∏](#–ø—Ä–∞–≤–∏–ª–∞-—ç–ª–∏–∑–∏–∏)
4. [–í—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö](#–≤—Ä–µ–º–µ–Ω–∞-–∂–∏–∑–Ω–∏-–≤-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö)
5. [–°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏](#—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ-–≤—Ä–µ–º—è-–∂–∏–∑–Ω–∏)
6. [–°–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#—Å–ª–æ–∂–Ω—ã–µ-—Å—Ü–µ–Ω–∞—Ä–∏–∏)

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏?

**–í—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏** - —ç—Ç–æ —Å–ø–æ—Å–æ–± Rust –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤–∞–ª–∏–¥–Ω—ã. –ö–∞–∂–¥–∞—è —Å—Å—ã–ª–∫–∞ –≤ Rust –∏–º–µ–µ—Ç –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ - –æ–±–ª–∞—Å—Ç—å –∫–æ–¥–∞, –≥–¥–µ —ç—Ç–∞ —Å—Å—ã–ª–∫–∞ –≤–∞–ª–∏–¥–Ω–∞.

### –ü—Ä–æ–±–ª–µ–º–∞ –≤–∏—Å—è—á–∏—Ö —Å—Å—ã–ª–æ–∫
```rust
// ‚ùå –≠—Ç–æ—Ç –∫–æ–¥ –ù–ï —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
fn –≤–∏—Å—è—á–∞—è_—Å—Å—ã–ª–∫–∞() -> &String {
    let s = String::from("–ø—Ä–∏–≤–µ—Ç");
    &s  // s –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞, —Å—Å—ã–ª–∫–∞ —Å—Ç–∞–Ω–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–π!
}

// ‚úÖ –†–µ—à–µ–Ω–∏–µ: –≤–µ—Ä–Ω—É—Ç—å –≤–ª–∞–¥–µ–Ω–∏–µ
fn –Ω–µ_–≤–∏—Å—è—á–∞—è() -> String {
    let s = String::from("–ø—Ä–∏–≤–µ—Ç");
    s  // –ü–µ—Ä–µ–¥–∞—ë–º –≤–ª–∞–¥–µ–Ω–∏–µ
}
```

### –ù–µ—è–≤–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏
```rust
fn main() {
    let x = 5;            // ----------+-- 'a
                         //           |
    let r = &x;          // --+-- 'b  |
                         //   |       |
    println!("r: {}", r); //   |       |
                         // --+       |
}                        // ----------+
```

## üìù –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤—Ä–µ–º—ë–Ω –∂–∏–∑–Ω–∏

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å
```rust
&i32        // —Å—Å—ã–ª–∫–∞
&'a i32     // —Å—Å—ã–ª–∫–∞ —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ 'a
&'a mut i32 // –∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞ —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ 'a
```

### –§—É–Ω–∫—Ü–∏–∏ —Å –≤—Ä–µ–º–µ–Ω–∞–º–∏ –∂–∏–∑–Ω–∏
```rust
// –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æÃÅ–ª—å—à—É—é –∏–∑ –¥–≤—É—Ö —Å—Ç—Ä–æ–∫
fn —Å–∞–º–∞—è_–¥–ª–∏–Ω–Ω–∞—è<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() {
        x
    } else {
        y
    }
}

fn main() {
    let —Å—Ç—Ä–æ–∫–∞1 = String::from("–∫–æ—Ä–æ—Ç–∫–∞—è");
    let —Å—Ç—Ä–æ–∫–∞2 = String::from("–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞");
    
    let —Ä–µ–∑—É–ª—å—Ç–∞—Ç = —Å–∞–º–∞—è_–¥–ª–∏–Ω–Ω–∞—è(&—Å—Ç—Ä–æ–∫–∞1, &—Å—Ç—Ä–æ–∫–∞2);
    println!("–°–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è: {}", —Ä–µ–∑—É–ª—å—Ç–∞—Ç);
}
```

### –†–∞–∑–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏
```rust
// –î–≤–∞ —Ä–∞–∑–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏
fn –ø–µ—Ä–≤–∞—è<'a, 'b>(x: &'a str, y: &'b str) -> &'a str {
    x  // –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º x, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ 'a
}

// –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–≤—è–∑–∞–Ω–æ —Å x
fn —Å–æ_—Å–≤—è–∑–∞–Ω–Ω—ã–º_–≤—Ä–µ–º–µ–Ω–µ–º<'a>(x: &'a str, y: &str) -> &'a str {
    println!("y –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: {}", y);
    x
}
```

### –ü—Ä–∏–º–µ—Ä—ã —Å –æ–±–ª–∞—Å—Ç—è–º–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
```rust
fn main() {
    let —Å—Ç—Ä–æ–∫–∞1 = String::from("–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞");
    let —Ä–µ–∑—É–ª—å—Ç–∞—Ç;
    
    {
        let —Å—Ç—Ä–æ–∫–∞2 = String::from("xyz");
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç = —Å–∞–º–∞—è_–¥–ª–∏–Ω–Ω–∞—è(—Å—Ç—Ä–æ–∫–∞1.as_str(), —Å—Ç—Ä–æ–∫–∞2.as_str());
        println!("–†–µ–∑—É–ª—å—Ç–∞—Ç –≤–Ω—É—Ç—Ä–∏: {}", —Ä–µ–∑—É–ª—å—Ç–∞—Ç);
    } // —Å—Ç—Ä–æ–∫–∞2 –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
    
    // ‚ùå –û—à–∏–±–∫–∞: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–æ–∫–∞2
    // println!("–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–Ω–∞—Ä—É–∂–∏: {}", —Ä–µ–∑—É–ª—å—Ç–∞—Ç);
}
```

## üèóÔ∏è –í—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ —Å—Å—ã–ª–∫–∞–º–∏
```rust
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ö—Ä–∞–Ω—è—â–∞—è —Å—Å—ã–ª–∫—É
struct –í–∞–∂–Ω–∞—è–í—ã–¥–µ—Ä–∂–∫–∞<'a> {
    —á–∞—Å—Ç—å: &'a str,
}

impl<'a> –í–∞–∂–Ω–∞—è–í—ã–¥–µ—Ä–∂–∫–∞<'a> {
    fn —É—Ä–æ–≤–µ–Ω—å(&self) -> i32 {
        3
    }
    
    // –ú–µ—Ç–æ–¥ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
    fn –æ–±—ä—è–≤–∏—Ç—å_–∏_–≤–µ—Ä–Ω—É—Ç—å_—á–∞—Å—Ç—å(&self, –æ–±—ä—è–≤–ª–µ–Ω–∏–µ: &str) -> &str {
        println!("–í–Ω–∏–º–∞–Ω–∏–µ: {}", –æ–±—ä—è–≤–ª–µ–Ω–∏–µ);
        self.—á–∞—Å—Ç—å
    }
}

fn main() {
    let —Ä–æ–º–∞–Ω = String::from("–ü–æ–∑–≤–æ–Ω–∏ –º–Ω–µ –ò–∑–º–∞–∏–ª. –ù–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç –Ω–∞–∑–∞–¥...");
    let –ø–µ—Ä–≤–æ–µ_–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ = —Ä–æ–º–∞–Ω.split('.').next().expect("–ù–µ—Ç '.'");
    
    let –≤—ã–¥–µ—Ä–∂–∫–∞ = –í–∞–∂–Ω–∞—è–í—ã–¥–µ—Ä–∂–∫–∞ {
        —á–∞—Å—Ç—å: –ø–µ—Ä–≤–æ–µ_–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ,
    };
    
    println!("–í—ã–¥–µ—Ä–∂–∫–∞: {}", –≤—ã–¥–µ—Ä–∂–∫–∞.—á–∞—Å—Ç—å);
}
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö
```rust
struct –ö–æ–Ω—Ç–µ–∫—Å—Ç<'s, 'p> {
    —Å—Ç—Ä–æ–∫–∞: &'s str,
    –ø–∞—Ä—Å–µ—Ä: &'p str,
}

impl<'s, 'p> –ö–æ–Ω—Ç–µ–∫—Å—Ç<'s, 'p> {
    fn –ø–∞—Ä—Å–∏—Ç—å(&self) -> Result<(), &'p str> {
        Err(self.–ø–∞—Ä—Å–µ—Ä)
    }
}
```

## üîÑ –ü—Ä–∞–≤–∏–ª–∞ —ç–ª–∏–∑–∏–∏ (Elision)

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤—Ä–µ–º—ë–Ω –∂–∏–∑–Ω–∏:

### –ü—Ä–∞–≤–∏–ª–æ 1: –ö–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ—ë –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏
```rust
fn foo(x: &i32)                    // fn foo<'a>(x: &'a i32)
fn foo(x: &i32, y: &i32)          // fn foo<'a, 'b>(x: &'a i32, y: &'b i32)
```

### –ü—Ä–∞–≤–∏–ª–æ 2: –ï—Å–ª–∏ –æ–¥–∏–Ω –≤—Ö–æ–¥–Ω–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –µ–≥–æ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –≤—ã—Ö–æ–¥—É
```rust
fn foo(x: &i32) -> &i32            // fn foo<'a>(x: &'a i32) -> &'a i32
```

### –ü—Ä–∞–≤–∏–ª–æ 3: –ï—Å–ª–∏ –µ—Å—Ç—å &self –∏–ª–∏ &mut self, –µ–≥–æ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –≤—ã—Ö–æ–¥—É
```rust
impl<'a> –í–∞–∂–Ω–∞—è–í—ã–¥–µ—Ä–∂–∫–∞<'a> {
    fn –æ–±—ä—è–≤–∏—Ç—å(&self, –æ–±—ä—è–≤–ª–µ–Ω–∏–µ: &str) -> &str {
        self.—á–∞—Å—Ç—å  // –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ self –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
    }
}
```

### –ü—Ä–∏–º–µ—Ä—ã —ç–ª–∏–∑–∏–∏
```rust
// –≠–ª–∏–∑–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–∞–≤–∏–ª–æ 2
fn –ø–µ—Ä–≤–∞—è_—Å–ª–æ–≤–æ(s: &str) -> &str {
    let –±–∞–π—Ç—ã = s.as_bytes();
    
    for (i, &—ç–ª–µ–º–µ–Ω—Ç) in –±–∞–π—Ç—ã.iter().enumerate() {
        if —ç–ª–µ–º–µ–Ω—Ç == b' ' {
            return &s[0..i];
        }
    }
    
    &s[..]
}

// –≠–ª–∏–∑–∏—è –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç - –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—å
// fn —Å–∞–º–∞—è_–¥–ª–∏–Ω–Ω–∞—è(x: &str, y: &str) -> &str {  // –û—à–∏–±–∫–∞!
//     if x.len() > y.len() { x } else { y }
// }
```

## üåü 'static –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏

### –ß—Ç–æ —Ç–∞–∫–æ–µ 'static
```rust
// –°—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã –∏–º–µ—é—Ç –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ 'static
let s: &'static str = "–Ø –∂–∏–≤—É –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É!";

// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
static –ì–õ–û–ë–ê–õ–¨–ù–ê–Ø: &str = "–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞";

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–æ —Å—Å—ã–ª–∫–∞–º–∏
const –ö–û–ù–°–¢–ê–ù–¢–ê: &str = "–ö–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞";
```

### 'static –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö
```rust
// –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è 'static —Å—Å—ã–ª–∫—É
fn –ø–æ–ª—É—á–∏—Ç—å_—Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é() -> &'static str {
    "–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–æ–∫–∞"
}

// 'static –∫–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç—Ä–µ–π—Ç–∞
fn —Ç—Ä–µ–±—É–µ—Ç_—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ<T: AsRef<str> + 'static>(t: &T) {
    // T –¥–æ–ª–∂–µ–Ω –∂–∏—Ç—å –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É
}
```

### Box —Å 'static
```rust
// –¢—Ä–µ–π—Ç-–æ–±—ä–µ–∫—Ç —Å 'static –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
fn –ø–æ–ª—É—á–∏—Ç—å_—Ç—Ä–µ–π—Ç_–æ–±—ä–µ–∫—Ç() -> Box<dyn std::fmt::Display + 'static> {
    Box::new("–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–æ–∫–∞")
}
```

## üîß –°–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—Ä–µ–º—ë–Ω –∂–∏–∑–Ω–∏
```rust
// 'a –¥–æ–ª–∂–Ω–æ –∂–∏—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ 'b
fn —Å–ª–æ–∂–Ω–∞—è<'a, 'b: 'a>(x: &'a str, y: &'b str) -> &'a str {
    x
}

// –¢–æ –∂–µ —Å–∞–º–æ–µ —Å where
fn —Å–ª–æ–∂–Ω–∞—è_where<'a, 'b>(x: &'a str, y: &'b str) -> &'a str 
where
    'b: 'a,
{
    x
}
```

### Higher-Ranked Trait Bounds (HRTB)
```rust
// for<'a> –æ–∑–Ω–∞—á–∞–µ—Ç "–¥–ª—è –ª—é–±–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ 'a"
fn –≤—ã–∑–≤–∞—Ç—å_—Å_—Å—Å—ã–ª–∫–æ–π<F>(f: F)
where
    F: for<'a> Fn(&'a str),
{
    f("–ø—Ä–∏–≤–µ—Ç");
}

// –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –∑–∞–º—ã–∫–∞–Ω–∏—è–º–∏
fn main() {
    –≤—ã–∑–≤–∞—Ç—å_—Å_—Å—Å—ã–ª–∫–æ–π(|s| println!("{}", s));
}
```

### –í—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ —Å —Ç—Ä–µ–π—Ç–∞–º–∏
```rust
trait –ü–∞—Ä—Å–µ—Ä<'a> {
    type –í—ã–≤–æ–¥;
    
    fn –ø–∞—Ä—Å–∏—Ç—å(&self, –≤–≤–æ–¥: &'a str) -> Self::–í—ã–≤–æ–¥;
}

struct –°—Ç—Ä–æ–∫–æ–≤—ã–π–ü–∞—Ä—Å–µ—Ä;

impl<'a> –ü–∞—Ä—Å–µ—Ä<'a> for –°—Ç—Ä–æ–∫–æ–≤—ã–π–ü–∞—Ä—Å–µ—Ä {
    type –í—ã–≤–æ–¥ = &'a str;
    
    fn –ø–∞—Ä—Å–∏—Ç—å(&self, –≤–≤–æ–¥: &'a str) -> Self::–í—ã–≤–æ–¥ {
        –≤–≤–æ–¥
    }
}
```

## üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ö–µ—à —Å–æ –≤—Ä–µ–º–µ–Ω–∞–º–∏ –∂–∏–∑–Ω–∏
```rust
use std::collections::HashMap;

struct –ö–µ—à<'a> {
    –¥–∞–Ω–Ω—ã–µ: HashMap<String, &'a str>,
}

impl<'a> –ö–µ—à<'a> {
    fn –Ω–æ–≤—ã–π() -> Self {
        –ö–µ—à {
            –¥–∞–Ω–Ω—ã–µ: HashMap::new(),
        }
    }
    
    fn –≤—Å—Ç–∞–≤–∏—Ç—å(&mut self, –∫–ª—é—á: String, –∑–Ω–∞—á–µ–Ω–∏–µ: &'a str) {
        self.–¥–∞–Ω–Ω—ã–µ.insert(–∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ);
    }
    
    fn –ø–æ–ª—É—á–∏—Ç—å(&self, –∫–ª—é—á: &str) -> Option<&&'a str> {
        self.–¥–∞–Ω–Ω—ã–µ.get(–∫–ª—é—á)
    }
}

fn main() {
    let –∑–Ω–∞—á–µ–Ω–∏–µ = "–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ";
    let mut –∫–µ—à = –ö–µ—à::–Ω–æ–≤—ã–π();
    
    –∫–µ—à.–≤—Å—Ç–∞–≤–∏—Ç—å("–∫–ª—é—á1".to_string(), –∑–Ω–∞—á–µ–Ω–∏–µ);
    
    if let Some(&–¥–∞–Ω–Ω—ã–µ) = –∫–µ—à.–ø–æ–ª—É—á–∏—Ç—å("–∫–ª—é—á1") {
        println!("–ò–∑ –∫–µ—à–∞: {}", –¥–∞–Ω–Ω—ã–µ);
    }
}
```

### –ò—Ç–µ—Ä–∞—Ç–æ—Ä —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
```rust
struct –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å<'a> {
    –æ—Å—Ç–∞—Ç–æ–∫: &'a str,
    —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: char,
}

impl<'a> –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å<'a> {
    fn –Ω–æ–≤—ã–π(—Å—Ç—Ä–æ–∫–∞: &'a str, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: char) -> Self {
        –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å {
            –æ—Å—Ç–∞—Ç–æ–∫: —Å—Ç—Ä–æ–∫–∞,
            —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å,
        }
    }
}

impl<'a> Iterator for –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å<'a> {
    type Item = &'a str;
    
    fn next(&mut self) -> Option<Self::Item> {
        if let Some(–ø–æ–∑–∏—Ü–∏—è) = self.–æ—Å—Ç–∞—Ç–æ–∫.find(self.—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å) {
            let —á–∞—Å—Ç—å = &self.–æ—Å—Ç–∞—Ç–æ–∫[..–ø–æ–∑–∏—Ü–∏—è];
            self.–æ—Å—Ç–∞—Ç–æ–∫ = &self.–æ—Å—Ç–∞—Ç–æ–∫[–ø–æ–∑–∏—Ü–∏—è + 1..];
            Some(—á–∞—Å—Ç—å)
        } else if !self.–æ—Å—Ç–∞—Ç–æ–∫.is_empty() {
            let —á–∞—Å—Ç—å = self.–æ—Å—Ç–∞—Ç–æ–∫;
            self.–æ—Å—Ç–∞—Ç–æ–∫ = "";
            Some(—á–∞—Å—Ç—å)
        } else {
            None
        }
    }
}

fn main() {
    let —Ç–µ–∫—Å—Ç = "–ø—Ä–∏–≤–µ—Ç,–º–∏—Ä,rust";
    let —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å = –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å::–Ω–æ–≤—ã–π(—Ç–µ–∫—Å—Ç, ',');
    
    for —á–∞—Å—Ç—å in —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å {
        println!("–ß–∞—Å—Ç—å: {}", —á–∞—Å—Ç—å);
    }
}
```

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ 1: –í–æ–∑–≤—Ä–∞—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```rust
// ‚ùå –û–®–ò–ë–ö–ê
fn —Å–æ–∑–¥–∞—Ç—å_—Å—Ç—Ä–æ–∫—É() -> &str {
    let s = String::from("–ø—Ä–∏–≤–µ—Ç");
    &s  // s –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞!
}

// ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –í–µ—Ä–Ω—É—Ç—å String
fn —Å–æ–∑–¥–∞—Ç—å_—Å—Ç—Ä–æ–∫—É_v1() -> String {
    String::from("–ø—Ä–∏–≤–µ—Ç")
}

// ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –í–µ—Ä–Ω—É—Ç—å 'static
fn —Å–æ–∑–¥–∞—Ç—å_—Å—Ç—Ä–æ–∫—É_v2() -> &'static str {
    "–ø—Ä–∏–≤–µ—Ç"  // –°—Ç—Ä–æ–∫–æ–≤—ã–π –ª–∏—Ç–µ—Ä–∞–ª
}
```

### –û—à–∏–±–∫–∞ 2: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—Ä–µ–º—ë–Ω –∂–∏–∑–Ω–∏
```rust
// ‚ùå –û–®–ò–ë–ö–ê
struct –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä<'a> {
    –¥–∞–Ω–Ω—ã–µ: &'a str,
}

fn –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å_–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä() {
    let –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä;
    {
        let —Å—Ç—Ä–æ–∫–∞ = String::from("–ø—Ä–∏–≤–µ—Ç");
        –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä = –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä { –¥–∞–Ω–Ω—ã–µ: &—Å—Ç—Ä–æ–∫–∞ };
    } // —Å—Ç—Ä–æ–∫–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∑–¥–µ—Å—å
    // println!("{}", –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.–¥–∞–Ω–Ω—ã–µ); // –û—à–∏–±–∫–∞!
}

// ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
fn –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å_–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä_–ø—Ä–∞–≤–∏–ª—å–Ω–æ() {
    let —Å—Ç—Ä–æ–∫–∞ = String::from("–ø—Ä–∏–≤–µ—Ç");
    let –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä = –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä { –¥–∞–Ω–Ω—ã–µ: &—Å—Ç—Ä–æ–∫–∞ };
    println!("{}", –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.–¥–∞–Ω–Ω—ã–µ); // OK
}
```

## üéØ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

1. **–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é** `–æ–±—ä–µ–¥–∏–Ω–∏—Ç—å<'a>(x: &'a str, y: &'a str, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: &str) -> String`
2. **–°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É** `–î–æ–∫—É–º–µ–Ω—Ç<'a>` —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
3. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ** —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π string splitter —Å –≤—Ä–µ–º–µ–Ω–∞–º–∏ –∂–∏–∑–Ω–∏
4. **–ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏** –≤—Ä–µ–º—ë–Ω –∂–∏–∑–Ω–∏ –≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –∫–æ–¥–µ

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–ù–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–ª–∏–∑–∏—é
2. **–î–µ–ª–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ—Ä–æ—Ç–∫–∏–º–∏**
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏** –¥–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
4. **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –≤–ª–∞–¥–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∞–º** –∫–æ–≥–¥–∞ —ç—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç API
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏**
6. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 'static –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ** - —ç—Ç–æ —Å–∏–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ

## üìä –®–ø–∞—Ä–≥–∞–ª–∫–∞

```rust
// –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
&'a T              // –°—Å—ã–ª–∫–∞ —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ 'a
&'a mut T          // –ò–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞

// –í —Ñ—É–Ω–∫—Ü–∏—è—Ö
fn foo<'a>(x: &'a str) -> &'a str

// –í —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö
struct S<'a> {
    field: &'a str,
}

// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
'a: 'b             // 'a –∂–∏–≤—ë—Ç –∫–∞–∫ –º–∏–Ω–∏–º—É–º —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ 'b
T: 'a              // T —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫–∏, –∂–∏–≤—É—â–∏–µ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 'a

// –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ
'static            // –ñ–∏–≤—ë—Ç –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É
for<'a>           // –î–ª—è –ª—é–±–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[02_–í–ª–∞–¥–µ–Ω–∏–µ_–∏_–∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ/00_–ò–Ω–¥–µ–∫—Å|–í–ª–∞–¥–µ–Ω–∏–µ –∏ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ]]
- [[08_–¢—Ä–µ–π—Ç—ã/00_–ò–Ω–¥–µ–∫—Å|–í—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏ –≤ —Ç—Ä–µ–π—Ç–∞—Ö]]
- [[10_–û–±–æ–±—â–µ–Ω–∏—è/00_–ò–Ω–¥–µ–∫—Å|–û–±–æ–±—â–µ–Ω–∏—è —Å –≤—Ä–µ–º–µ–Ω–∞–º–∏ –∂–∏–∑–Ω–∏]]
- [[12_–£–º–Ω—ã–µ_—É–∫–∞–∑–∞—Ç–µ–ª–∏/00_–ò–Ω–¥–µ–∫—Å|–£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –≤—Ä–µ–º–µ–Ω–∞ –∂–∏–∑–Ω–∏]]

---
#rust #lifetimes #–≤—Ä–µ–º–µ–Ω–∞_–∂–∏–∑–Ω–∏ #—Å—Å—ã–ª–∫–∏ #–ø–∞–º—è—Ç—å
