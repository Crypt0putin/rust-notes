# ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Rust

## üéØ –§–∏–ª–æ—Å–æ—Ñ–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

Rust –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —è–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏, –¥–µ–ª–∞—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω—ã–º–∏. –í–º–µ—Å—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–∏–ø—ã `Result` –∏ `Option`.

## üö® –î–≤–∞ –≤–∏–¥–∞ –æ—à–∏–±–æ–∫

### –ù–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã–µ –æ—à–∏–±–∫–∏ - panic!
```rust
// –Ø–≤–Ω–∞—è –ø–∞–Ω–∏–∫–∞
panic!("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞!");

// –ü–∞–Ω–∏–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –º–∞—Å—Å–∏–≤–∞
let v = vec![1, 2, 3];
v[99]; // panic: index out of bounds

// unwrap –ø–∞–Ω–∏–∫—É–µ—Ç –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ—Ç
let —Ñ–∞–π–ª = std::fs::File::open("–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π.txt").unwrap();
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã–µ –æ—à–∏–±–∫–∏ - Result
```rust
use std::fs::File;
use std::io::ErrorKind;

fn main() {
    let —Ñ–∞–π–ª = File::open("–ø—Ä–∏–≤–µ—Ç.txt");
    
    let —Ñ–∞–π–ª = match —Ñ–∞–π–ª {
        Ok(file) => file,
        Err(–æ—à–∏–±–∫–∞) => match –æ—à–∏–±–∫–∞.kind() {
            ErrorKind::NotFound => {
                match File::create("–ø—Ä–∏–≤–µ—Ç.txt") {
                    Ok(fc) => fc,
                    Err(e) => panic!("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª: {:?}", e),
                }
            }
            –¥—Ä—É–≥–∞—è_–æ—à–∏–±–∫–∞ => {
                panic!("–ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–∞–π–ª–∞: {:?}", –¥—Ä—É–≥–∞—è_–æ—à–∏–±–∫–∞)
            }
        }
    };
}
```

## üì¶ –¢–∏–ø Result

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
```rust
enum Result<T, E> {
    Ok(T),    // –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    Err(E),   // –û—à–∏–±–∫–∞
}
```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```rust
use std::fs::File;
use std::io::Read;

fn –ø—Ä–æ—á–∏—Ç–∞—Ç—å_—Ñ–∞–π–ª(–ø—É—Ç—å: &str) -> Result<String, std::io::Error> {
    let mut —Ñ–∞–π–ª = File::open(–ø—É—Ç—å)?;
    let mut —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ = String::new();
    —Ñ–∞–π–ª.read_to_string(&mut —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ)?;
    Ok(—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ)
}

fn main() {
    match –ø—Ä–æ—á–∏—Ç–∞—Ç—å_—Ñ–∞–π–ª("–¥–∞–Ω–Ω—ã–µ.txt") {
        Ok(—Ç–µ–∫—Å—Ç) => println!("–°–æ–¥–µ—Ä–∂–∏–º–æ–µ: {}", —Ç–µ–∫—Å—Ç),
        Err(–æ—à–∏–±–∫–∞) => println!("–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è: {}", –æ—à–∏–±–∫–∞),
    }
}
```

## üéØ –û–ø–µ—Ä–∞—Ç–æ—Ä ? –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫

### –£–ø—Ä–æ—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```rust
use std::fs::File;
use std::io::{self, Read};

// –î–ª–∏–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
fn —á–∏—Ç–∞—Ç—å_–∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è_v1() -> Result<String, io::Error> {
    let —Ñ–∞–π–ª = File::open("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.txt");
    
    let mut —Ñ–∞–π–ª = match —Ñ–∞–π–ª {
        Ok(file) => file,
        Err(e) => return Err(e),
    };
    
    let mut –∏–º—è = String::new();
    
    match —Ñ–∞–π–ª.read_to_string(&mut –∏–º—è) {
        Ok(_) => Ok(–∏–º—è),
        Err(e) => Err(e),
    }
}

// –ö–æ—Ä–æ—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è —Å ?
fn —á–∏—Ç–∞—Ç—å_–∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è_v2() -> Result<String, io::Error> {
    let mut —Ñ–∞–π–ª = File::open("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.txt")?;
    let mut –∏–º—è = String::new();
    —Ñ–∞–π–ª.read_to_string(&mut –∏–º—è)?;
    Ok(–∏–º—è)
}

// –ï—â—ë –∫–æ—Ä–æ—á–µ - —Ü–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤
fn —á–∏—Ç–∞—Ç—å_–∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è_v3() -> Result<String, io::Error> {
    let mut –∏–º—è = String::new();
    File::open("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.txt")?.read_to_string(&mut –∏–º—è)?;
    Ok(–∏–º—è)
}

// –°–∞–º–∞—è –∫–æ—Ä–æ—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è
fn —á–∏—Ç–∞—Ç—å_–∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è_v4() -> Result<String, io::Error> {
    std::fs::read_to_string("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.txt")
}
```

## üì¶ –¢–∏–ø Option

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
```rust
enum Option<T> {
    Some(T),  // –ï—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
    None,     // –ù–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```rust
fn –Ω–∞–π—Ç–∏_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è(id: u32) -> Option<–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å> {
    if id == 1 {
        Some(–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å { 
            id: 1, 
            –∏–º—è: String::from("–ê–ª–∏—Å–∞") 
        })
    } else {
        None
    }
}

fn main() {
    let –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –Ω–∞–π—Ç–∏_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è(1);
    
    match –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {
        Some(–ø) => println!("–ù–∞–π–¥–µ–Ω: {}", –ø.–∏–º—è),
        None => println!("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"),
    }
    
    // –ò–ª–∏ —Å if let
    if let Some(–ø) = –Ω–∞–π—Ç–∏_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è(1) {
        println!("–ù–∞–π–¥–µ–Ω: {}", –ø.–∏–º—è);
    }
}
```

## üîß –ú–µ—Ç–æ–¥—ã Result –∏ Option

### –ú–µ—Ç–æ–¥—ã Result
```rust
let —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Result<i32, &str> = Ok(2);

// map - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
let —É–º–Ω–æ–∂–µ–Ω–Ω—ã–π = —Ä–µ–∑—É–ª—å—Ç–∞—Ç.map(|x| x * 2); // Ok(4)

// map_err - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
let —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Result<i32, &str> = Err("–æ—à–∏–±–∫–∞");
let —Å_–ø—Ä–µ—Ñ–∏–∫—Å–æ–º = —Ä–µ–∑—É–ª—å—Ç–∞—Ç.map_err(|e| format!("–û—à–∏–±–∫–∞: {}", e));

// and_then - —Ü–µ–ø–æ—á–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
let —Ä–µ–∑—É–ª—å—Ç–∞—Ç = Ok(2)
    .and_then(|x| Ok(x * 2))
    .and_then(|x| Ok(x + 1)); // Ok(5)

// unwrap_or - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
let –∑–Ω–∞—á–µ–Ω–∏–µ = —Ä–µ–∑—É–ª—å—Ç–∞—Ç.unwrap_or(0);

// unwrap_or_else - –≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
let –∑–Ω–∞—á–µ–Ω–∏–µ = —Ä–µ–∑—É–ª—å—Ç–∞—Ç.unwrap_or_else(|–æ—à–∏–±–∫–∞| {
    println!("–û—à–∏–±–∫–∞: {}", –æ—à–∏–±–∫–∞);
    0
});
```

### –ú–µ—Ç–æ–¥—ã Option
```rust
let –æ–ø—Ü–∏—è: Option<i32> = Some(5);

// map - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
let —É–º–Ω–æ–∂–µ–Ω–Ω–∞—è = –æ–ø—Ü–∏—è.map(|x| x * 2); // Some(10)

// filter - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
let –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–∞—è = –æ–ø—Ü–∏—è.filter(|&x| x > 3); // Some(5)

// and_then (flatMap)
let —Ä–µ–∑—É–ª—å—Ç–∞—Ç = –æ–ø—Ü–∏—è.and_then(|x| {
    if x > 0 { Some(x) } else { None }
});

// or_else - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
let —Ä–µ–∑—É–ª—å—Ç–∞—Ç = None.or_else(|| Some(5)); // Some(5)

// unwrap_or - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
let –∑–Ω–∞—á–µ–Ω–∏–µ = –æ–ø—Ü–∏—è.unwrap_or(0);

// ok_or - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ Result
let —Ä–µ–∑—É–ª—å—Ç–∞—Ç = –æ–ø—Ü–∏—è.ok_or("–ù–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è"); // Ok(5)
```

## üé® –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫

### –ü—Ä–æ—Å—Ç–æ–π —Ç–∏–ø –æ—à–∏–±–∫–∏
```rust
use std::fmt;

#[derive(Debug)]
enum –ú–æ—è–û—à–∏–±–∫–∞ {
    –ù–µ–ù–∞–π–¥–µ–Ω–æ,
    –ù–µ–≤–µ—Ä–Ω—ã–π–§–æ—Ä–º–∞—Ç,
    –°–µ—Ç–µ–≤–∞—è–û—à–∏–±–∫–∞(String),
}

impl fmt::Display for –ú–æ—è–û—à–∏–±–∫–∞ {
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
        match self {
            –ú–æ—è–û—à–∏–±–∫–∞::–ù–µ–ù–∞–π–¥–µ–Ω–æ => write!(f, "–≠–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"),
            –ú–æ—è–û—à–∏–±–∫–∞::–ù–µ–≤–µ—Ä–Ω—ã–π–§–æ—Ä–º–∞—Ç => write!(f, "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö"),
            –ú–æ—è–û—à–∏–±–∫–∞::–°–µ—Ç–µ–≤–∞—è–û—à–∏–±–∫–∞(—Å–æ–æ–±—â–µ–Ω–∏–µ) => {
                write!(f, "–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞: {}", —Å–æ–æ–±—â–µ–Ω–∏–µ)
            }
        }
    }
}

impl std::error::Error for –ú–æ—è–û—à–∏–±–∫–∞ {}
```

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
```rust
use std::io;
use std::num::ParseIntError;

#[derive(Debug)]
enum –û—à–∏–±–∫–∞–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è {
    Io(io::Error),
    –ü–∞—Ä—Å–∏–Ω–≥(ParseIntError),
    –ö–∞—Å—Ç–æ–º–Ω–∞—è(String),
}

impl From<io::Error> for –û—à–∏–±–∫–∞–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è {
    fn from(–æ—à–∏–±–∫–∞: io::Error) -> Self {
        –û—à–∏–±–∫–∞–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è::Io(–æ—à–∏–±–∫–∞)
    }
}

impl From<ParseIntError> for –û—à–∏–±–∫–∞–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è {
    fn from(–æ—à–∏–±–∫–∞: ParseIntError) -> Self {
        –û—à–∏–±–∫–∞–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è::–ü–∞—Ä—Å–∏–Ω–≥(–æ—à–∏–±–∫–∞)
    }
}

// –¢–µ–ø–µ—Ä—å ? –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ—à–∏–±–∫–∏
fn –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ñ–∞–π–ª(–ø—É—Ç—å: &str) -> Result<i32, –û—à–∏–±–∫–∞–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è> {
    let —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ = std::fs::read_to_string(–ø—É—Ç—å)?; // io::Error -> –û—à–∏–±–∫–∞–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    let —á–∏—Å–ª–æ: i32 = —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.trim().parse()?; // ParseIntError -> –û—à–∏–±–∫–∞–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    Ok(—á–∏—Å–ª–æ)
}
```

## üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```rust
#[derive(Debug)]
struct –í–æ–∑—Ä–∞—Å—Ç(u8);

impl –í–æ–∑—Ä–∞—Å—Ç {
    fn –Ω–æ–≤—ã–π(–∑–Ω–∞—á–µ–Ω–∏–µ: u8) -> Result<–í–æ–∑—Ä–∞—Å—Ç, String> {
        if –∑–Ω–∞—á–µ–Ω–∏–µ > 150 {
            Err(String::from("–í–æ–∑—Ä–∞—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ 150"))
        } else if –∑–Ω–∞—á–µ–Ω–∏–µ == 0 {
            Err(String::from("–í–æ–∑—Ä–∞—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 0"))
        } else {
            Ok(–í–æ–∑—Ä–∞—Å—Ç(–∑–Ω–∞—á–µ–Ω–∏–µ))
        }
    }
}

fn main() {
    match –í–æ–∑—Ä–∞—Å—Ç::–Ω–æ–≤—ã–π(25) {
        Ok(–≤–æ–∑—Ä–∞—Å—Ç) => println!("–í–æ–∑—Ä–∞—Å—Ç —Å–æ–∑–¥–∞–Ω: {:?}", –≤–æ–∑—Ä–∞—Å—Ç),
        Err(–æ—à–∏–±–∫–∞) => println!("–û—à–∏–±–∫–∞: {}", –æ—à–∏–±–∫–∞),
    }
}
```

### –ü—Ä–∏–º–µ—Ä 2: –¶–µ–ø–æ—á–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
```rust
fn –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_–¥–∞–Ω–Ω—ã–µ(–ø—É—Ç—å: &str) -> Result<Vec<i32>, Box<dyn std::error::Error>> {
    let —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ = std::fs::read_to_string(–ø—É—Ç—å)?;
    
    let —á–∏—Å–ª–∞: Result<Vec<i32>, _> = —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
        .lines()
        .map(|—Å—Ç—Ä–æ–∫–∞| —Å—Ç—Ä–æ–∫–∞.parse::<i32>())
        .collect();
    
    —á–∏—Å–ª–∞.map_err(|e| e.into())
}
```

## üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Result –¥–ª—è –æ–∂–∏–¥–∞–µ–º—ã—Ö –æ—à–∏–±–æ–∫
```rust
// ‚úÖ –•–æ—Ä–æ—à–æ
fn –¥–µ–ª–∏—Ç—å(a: f64, b: f64) -> Result<f64, String> {
    if b == 0.0 {
        Err(String::from("–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å"))
    } else {
        Ok(a / b)
    }
}

// ‚ùå –ü–ª–æ—Ö–æ
fn –¥–µ–ª–∏—Ç—å_–ø–ª–æ—Ö–æ(a: f64, b: f64) -> f64 {
    if b == 0.0 {
        panic!("–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å"); // –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ panic –¥–ª—è –æ–∂–∏–¥–∞–µ–º—ã—Ö –æ—à–∏–±–æ–∫
    }
    a / b
}
```

### 2. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—à–∏–±–æ–∫
```rust
use std::fs::File;

fn –æ—Ç–∫—Ä—ã—Ç—å_–∫–æ–Ω—Ñ–∏–≥() -> Result<File, String> {
    File::open("config.toml")
        .map_err(|e| format!("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª: {}", e))
}
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –æ—à–∏–±–æ–∫
```rust
// thiserror - –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫
use thiserror::Error;

#[derive(Error, Debug)]
enum –ë–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞—è–û—à–∏–±–∫–∞ {
    #[error("–¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")]
    –ù–µ–ù–∞–π–¥–µ–Ω–æ,
    
    #[error("–Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–∂–∏–¥–∞–ª—Å—è {expected:?}, –Ω–∞–π–¥–µ–Ω {found:?})")]
    –ù–µ–≤–µ—Ä–Ω—ã–π–ó–∞–≥–æ–ª–æ–≤–æ–∫ {
        expected: String,
        found: String,
    },
}

// anyhow - –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
use anyhow::{Context, Result};

fn –ø–æ–ª—É—á–∏—Ç—å_–∫–æ–Ω—Ñ–∏–≥() -> Result<–ö–æ–Ω—Ñ–∏–≥> {
    let –∫–æ–Ω—Ñ–∏–≥ = std::fs::read_to_string("config.toml")
        .context("–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å config.toml")?;
    
    let –∫–æ–Ω—Ñ–∏–≥: –ö–æ–Ω—Ñ–∏–≥ = toml::from_str(&–∫–æ–Ω—Ñ–∏–≥)
        .context("–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é")?;
    
    Ok(–∫–æ–Ω—Ñ–∏–≥)
}
```

## üìä –®–ø–∞—Ä–≥–∞–ª–∫–∞

```rust
// panic! –¥–ª—è –Ω–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã—Ö –æ—à–∏–±–æ–∫
panic!("–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞");

// Result –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º—ã—Ö –æ—à–∏–±–æ–∫
fn –º–æ–∂–µ—Ç_–æ—à–∏–±–∏—Ç—å—Å—è() -> Result<T, E> { }

// Option –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
fn –º–æ–∂–µ—Ç_–±—ã—Ç—å_–ø—É—Å—Ç–æ() -> Option<T> { }

// –û–ø–µ—Ä–∞—Ç–æ—Ä ? –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è
let –∑–Ω–∞—á–µ–Ω–∏–µ = –º–æ–∂–µ—Ç_–æ—à–∏–±–∏—Ç—å—Å—è()?;

// –ú–µ—Ç–æ–¥—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
—Ä–µ–∑—É–ª—å—Ç–∞—Ç.unwrap();        // –ü–∞–Ω–∏–∫—É–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ
—Ä–µ–∑—É–ª—å—Ç–∞—Ç.expect("—Ç–µ–∫—Å—Ç"); // –ü–∞–Ω–∏–∫—É–µ—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
—Ä–µ–∑—É–ª—å—Ç–∞—Ç.unwrap_or(—É–º–æ–ª—á); // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
—Ä–µ–∑—É–ª—å—Ç–∞—Ç.is_ok();         // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—Ö–∞
—Ä–µ–∑—É–ª—å—Ç–∞—Ç.is_err();        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–∫–∏
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[01_–û—Å–Ω–æ–≤—ã/06_–§—É–Ω–∫—Ü–∏–∏|–§—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è]]
- [[05_–°—Ç—Ä—É–∫—Ç—É—Ä—ã_–∏_–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è/02_–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è|Enum Option –∏ Result]]
- [[08_–¢—Ä–µ–π—Ç—ã/05_Error_trait|Error trait]]

---
#rust #–æ—à–∏–±–∫–∏ #result #option #panic #–æ–±—Ä–∞–±–æ—Ç–∫–∞_–æ—à–∏–±–æ–∫
