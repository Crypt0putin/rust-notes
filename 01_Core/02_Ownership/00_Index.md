# üîë Ownership System Overview

## üéØ –°–∏—Å—Ç–µ–º–∞ –≤–ª–∞–¥–µ–Ω–∏—è –≤ Rust

Ownership - —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Rust –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –±–µ–∑ —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞ –∏ –±–µ–∑ —è–≤–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è/–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏.

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞

### 1. [[01_Core/02_Ownership/01_Ownership_Rules|Ownership Rules]]
- –¢—Ä–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤–ª–∞–¥–µ–Ω–∏—è
- –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ (Scope)
- Drop trait

### 2. [[01_Core/02_Ownership/02_Memory_Stack_Heap|Stack vs Heap]]
- –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Å—Ç–µ–∫–æ–º –∏ –∫—É—á–µ–π
- –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≥–¥–µ
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 3. [[01_Core/02_Ownership/03_Move_Semantics|Move Semantics]]
- –ß—Ç–æ —Ç–∞–∫–æ–µ Move
- Move vs Copy
- Partial moves

### 4. [[01_Core/02_Ownership/04_Copy_Clone|Copy and Clone Traits]]
- Copy trait –¥–ª—è —Å—Ç–µ–∫–æ–≤—ã—Ö —Ç–∏–ø–æ–≤
- Clone –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö Copy/Clone

## üó∫Ô∏è –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞

```mermaid
graph TD
    A[Ownership] --> B[Memory Model]
    B --> C[Stack]
    B --> D[Heap]
    
    A --> E[Move]
    A --> F[Copy]
    A --> G[Clone]
    
    E --> H[Borrowing]
    H --> I[References]
    I --> J[Lifetimes]
    
    F --> K[Primitive Types]
    G --> L[Complex Types]
```

## üéì –¢—Ä–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤–ª–∞–¥–µ–Ω–∏—è

### –ü—Ä–∞–≤–∏–ª–æ 1: –£ –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –µ—Å—Ç—å –≤–ª–∞–¥–µ–ª–µ—Ü
```rust
let s = String::from("hello"); // s –≤–ª–∞–¥–µ–µ—Ç —Å—Ç—Ä–æ–∫–æ–π
```

### –ü—Ä–∞–≤–∏–ª–æ 2: –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–ª–∞–¥–µ–ª–µ—Ü –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
```rust
let s1 = String::from("hello");
let s2 = s1; // s1 –±–æ–ª—å—à–µ –Ω–µ –≤–∞–ª–∏–¥–Ω–∞, s2 - –Ω–æ–≤—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü
```

### –ü—Ä–∞–≤–∏–ª–æ 3: –ö–æ–≥–¥–∞ –≤–ª–∞–¥–µ–ª–µ—Ü –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ scope, –∑–Ω–∞—á–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è
```rust
{
    let s = String::from("hello"); // s –≤–∞–ª–∏–¥–Ω–∞
    // –∏—Å–ø–æ–ª—å–∑—É–µ–º s
} // s –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ scope –∏ –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è
```

## üí° –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### Move –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```rust
let x = vec![1, 2, 3];
let y = x; // x moved to y
// println!("{:?}", x); // –û–®–ò–ë–ö–ê!
```

### Copy –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤
```rust
let x = 5;
let y = x; // x copied to y
println!("x = {}, y = {}", x, y); // –û–±–∞ –≤–∞–ª–∏–¥–Ω—ã
```

### Clone –¥–ª—è —è–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
```rust
let s1 = String::from("hello");
let s2 = s1.clone();
println!("s1 = {}, s2 = {}", s1, s2); // –û–±–∞ –≤–∞–ª–∏–¥–Ω—ã
```

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ê—Å–ø–µ–∫—Ç | Copy | Move | Clone |
|--------|------|------|-------|
| –°–∫–æ—Ä–æ—Å—Ç—å | –ë—ã—Å—Ç—Ä–æ | –ë—ã—Å—Ç—Ä–æ | –ú–µ–¥–ª–µ–Ω–Ω–æ |
| –ü–∞–º—è—Ç—å | –°—Ç–µ–∫ | –ü–µ—Ä–µ–¥–∞—á–∞ –≤–ª–∞–¥–µ–Ω–∏—è | –ù–æ–≤–∞—è –∞–ª–ª–æ–∫–∞—Ü–∏—è |
| –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ | –ü—Ä–∏–º–∏—Ç–∏–≤—ã | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –Ø–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ü—Ä–∏–º–µ—Ä | `i32, bool` | `String, Vec` | `.clone()` |

## üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä

```rust
#[derive(Debug)]
struct Person {
    name: String,
    age: u32,
}

fn main() {
    // Move —Å–µ–º–∞–Ω—Ç–∏–∫–∞
    let person1 = Person {
        name: String::from("Alice"),
        age: 30,
    };
    
    let person2 = person1; // person1 moved
    // println!("{:?}", person1); // –û–®–ò–ë–ö–ê!
    
    // Clone –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    let person3 = Person {
        name: String::from("Bob"),
        age: 25,
    };
    
    let person4 = Person {
        name: person3.name.clone(), // –Ø–≤–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        age: person3.age, // Copy –¥–ª—è u32
    };
    
    println!("{:?}", person3); // OK
    println!("{:?}", person4); // OK
}
```

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

1. **Memory Analyzer**: –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –ø–æ–∫–∞–∑—ã–≤–∞—é—â—É—é —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
2. **Move Tracker**: –û—Ç—Å–ª–µ–¥–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—á—É –≤–ª–∞–¥–µ–Ω–∏—è –≤ —Ü–µ–ø–æ—á–∫–µ —Ñ—É–Ω–∫—Ü–∏–π
3. **Clone Counter**: –ü–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ
4. **Custom Types**: –†–µ–∞–ª–∏–∑—É–π—Ç–µ Copy –∏ Clone –¥–ª—è —Å–≤–æ–∏—Ö —Ç–∏–ø–æ–≤

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è

- [ ] –ü–æ–Ω–∏–º–∞—é —Ç—Ä–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤–ª–∞–¥–µ–Ω–∏—è
- [ ] –ó–Ω–∞—é —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É Stack –∏ Heap
- [ ] –ú–æ–≥—É –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å, –≥–¥–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç Move
- [ ] –£–º–µ—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Clone –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ
- [ ] –ü–æ–Ω–∏–º–∞—é, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è Drop

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞: use after move
```rust
let s = String::from("hello");
process(s);
println!("{}", s); // –û–®–ò–ë–ö–ê: value used after move
```

### –†–µ—à–µ–Ω–∏—è:
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: `process(s.clone())`
2. –ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ: `process(&s)`
3. –í–æ–∑–≤—Ä–∞—Ç –≤–ª–∞–¥–µ–Ω–∏—è: `let s = process(s)`

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[01_Core/03_Borrowing/00_Index|Borrowing & References]] - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑ –≤–ª–∞–¥–µ–Ω–∏—è
- [[01_Core/04_Lifetimes/00_Index|Lifetimes]] - –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫
- [[02_Advanced/03_Smart_Pointers/00_Index|Smart Pointers]] - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

## üìö –†–µ—Å—É—Ä—Å—ã –¥–ª—è —É–≥–ª—É–±–ª–µ–Ω–∏—è

- [Rust Book Ch. 4](https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html)
- [Visualizing Memory](https://github.com/usagi/rust-memory-container-cs)
- [[Common Errors|Common Ownership Errors]]

---
#rust #ownership #memory #core
