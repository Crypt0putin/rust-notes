# üîë Ownership Rules

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–ª–∞–¥–µ–Ω–∏—è

### –ü—Ä–∞–≤–∏–ª–æ 1: –ö–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–º–µ–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞
```rust
let x = 5; // x –≤–ª–∞–¥–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ–º 5
let s = String::from("hello"); // s –≤–ª–∞–¥–µ–µ—Ç —Å—Ç—Ä–æ–∫–æ–π
```

### –ü—Ä–∞–≤–∏–ª–æ 2: –£ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–ª–∞–¥–µ–ª–µ—Ü
```rust
let s1 = String::from("hello");
let s2 = s1; // s1 –±–æ–ª—å—à–µ –Ω–µ –≤–∞–ª–∏–¥–Ω–∞! –í–ª–∞–¥–µ–Ω–∏–µ –ø–µ—Ä–µ—à–ª–æ –∫ s2
// println!("{}", s1); // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
```

### –ü—Ä–∞–≤–∏–ª–æ 3: –ö–æ–≥–¥–∞ –≤–ª–∞–¥–µ–ª–µ—Ü –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏, –∑–Ω–∞—á–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è
```rust
{
    let s = String::from("hello"); // s –≤–∞–ª–∏–¥–Ω–∞ —Å —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞
    // —Ä–∞–±–æ—Ç–∞–µ–º —Å s
} // –∑–¥–µ—Å—å s –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

- [[01_Core/02_Ownership/02_Memory_Stack_Heap|Stack vs Heap]] - –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
- [[01_Core/02_Ownership/03_Move_Semantics|Move —Å–µ–º–∞–Ω—Ç–∏–∫–∞]] - –∫–∞–∫ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤–ª–∞–¥–µ–Ω–∏–µ
- [[01_Core/03_Borrowing/01_References|–ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ]] - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑ –≤–ª–∞–¥–µ–Ω–∏—è
- [[01_Core/02_Ownership/04_Copy_Clone|Copy –∏ Clone]] - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üí° –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### Drop trait
–ö–æ–≥–¥–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏, Rust –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `drop`:

```rust
struct CustomSmartPointer {
    data: String,
}

impl Drop for CustomSmartPointer {
    fn drop(&mut self) {
        println!("Dropping CustomSmartPointer with data `{}`!", self.data);
    }
}
```

### –í–ª–∞–¥–µ–Ω–∏–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏
```rust
fn takes_ownership(some_string: String) { // some_string –≤—Ö–æ–¥–∏—Ç –≤ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
    println!("{}", some_string);
} // –ó–¥–µ—Å—å some_string –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ `drop` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

fn makes_copy(some_integer: i32) { // some_integer –≤—Ö–æ–¥–∏—Ç –≤ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
    println!("{}", some_integer);
} // –ó–¥–µ—Å—å some_integer –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏. –ù–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
```

## üéØ –§–ª–µ—à-–∫–∞—Ä—Ç–æ—á–∫–∏

#flashcard 
Q: –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –≤–ª–∞–¥–µ–ª–µ—Ü –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏?
A: Rust –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `drop`, –∏ –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è
<!--SR:!2024-01-15,3,250-->

#flashcard 
Q: –°–∫–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —É –∑–Ω–∞—á–µ–Ω–∏—è –≤ Rust?
A: –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–ª–∞–¥–µ–ª–µ—Ü –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏
<!--SR:!2024-01-18,4,270-->

## üìù –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü–µ—Ä–µ–¥–∞—á–∞ –≤–ª–∞–¥–µ–Ω–∏—è
```rust
fn main() {
    let s = String::from("hello");  // s –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
    
    takes_ownership(s);             // –∑–Ω–∞—á–µ–Ω–∏–µ s –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—é
                                    // –∏ –±–æ–ª—å—à–µ –Ω–µ –≤–∞–ª–∏–¥–Ω–æ –∑–¥–µ—Å—å
    
    let x = 5;                      // x –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
    
    makes_copy(x);                  // x –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—é,
                                    // –Ω–æ i32 - Copy, —Ç–∞–∫ —á—Ç–æ –º–æ–∂–Ω–æ
                                    // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å x –ø–æ—Å–ª–µ
}
```

### –ü—Ä–∏–º–µ—Ä 2: –í–æ–∑–≤—Ä–∞—Ç –≤–ª–∞–¥–µ–Ω–∏—è
```rust
fn gives_ownership() -> String {
    let some_string = String::from("hello");
    some_string // –≤–ª–∞–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤—ã–∑—ã–≤–∞—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏
}

fn takes_and_gives_back(a_string: String) -> String {
    a_string // –≤–ª–∞–¥–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
}
```

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
```rust
let s1 = String::from("hello");
let s2 = s1;
println!("{}, world!", s1); // –û–®–ò–ë–ö–ê! s1 –±–æ–ª—å—à–µ –Ω–µ –≤–∞–ª–∏–¥–Ω–∞
```

**–†–µ—à–µ–Ω–∏–µ**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
```rust
// –í–∞—Ä–∏–∞–Ω—Ç 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
let s1 = String::from("hello");
let s2 = s1.clone();
println!("s1 = {}, s2 = {}", s1, s2); // –†–∞–±–æ—Ç–∞–µ—Ç!

// –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
let s1 = String::from("hello");
let s2 = &s1;
println!("s1 = {}, s2 = {}", s1, s2); // –†–∞–±–æ—Ç–∞–µ—Ç!
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [The Rust Book - Chapter 4](https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html)
- [[Rust Memory Model]] - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –ø–∞–º—è—Ç–∏
- [[Common Ownership Patterns]] - –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞–±–æ—Ç—ã —Å –≤–ª–∞–¥–µ–Ω–∏–µ–º

---
#rust #ownership #core #memory
