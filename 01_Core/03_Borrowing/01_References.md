# üìå References and Borrowing

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ?

**–ó–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ** (Borrowing) - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ –≤–ª–∞–¥–µ–Ω–∏—è.

```rust
fn main() {
    let s1 = String::from("hello");
    let len = calculate_length(&s1); // &s1 - –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
    println!("The length of '{}' is {}.", s1, len); // s1 –≤—Å–µ –µ—â–µ –≤–∞–ª–∏–¥–Ω–∞!
}

fn calculate_length(s: &String) -> usize {
    s.len()
} // s –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏, –Ω–æ –Ω–µ –≤–ª–∞–¥–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ–º, –ø–æ—ç—Ç–æ–º—É –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
```

## üìä –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è

### –ü—Ä–∞–≤–∏–ª–æ 1: –õ–∏–±–æ –æ–¥–Ω–∞ –∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞, –ª–∏–±–æ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö

```rust
let mut s = String::from("hello");

// ‚úÖ –ù–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫ - –û–ö
let r1 = &s;
let r2 = &s;
println!("{} and {}", r1, r2);

// ‚ùå –ò–∑–º–µ–Ω—è–µ–º–∞—è –∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ - –û–®–ò–ë–ö–ê
let r3 = &s; // –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è
let r4 = &mut s; // –û–®–ò–ë–ö–ê: –Ω–µ–ª—å–∑—è –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞—Ç—å –∫–∞–∫ –∏–∑–º–µ–Ω—è–µ–º–æ–µ
```

### –ü—Ä–∞–≤–∏–ª–æ 2: –°—Å—ã–ª–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–Ω—ã–º–∏

```rust
// ‚ùå –í–∏—Å—è—á–∞—è —Å—Å—ã–ª–∫–∞ - –û–®–ò–ë–ö–ê
fn dangle() -> &String {
    let s = String::from("hello");
    &s // –û–®–ò–ë–ö–ê: s –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞, —Å—Å—ã–ª–∫–∞ —Å—Ç–∞–Ω–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–π
}

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
fn no_dangle() -> String {
    let s = String::from("hello");
    s // –ø–µ—Ä–µ–¥–∞–µ–º –≤–ª–∞–¥–µ–Ω–∏–µ
}
```

## üîó –°–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º–∏

```mermaid
graph LR
    A[Borrowing] --> B[[[01_Core/02_Ownership/01_Ownership_Rules|Ownership]]]
    A --> C[[[01_Core/04_Lifetimes/01_Lifetime_Basics|Lifetimes]]]
    A --> D[[[01_Core/03_Borrowing/02_Mutable_References|Mutable Refs]]]
    A --> E[[[01_Core/03_Borrowing/03_Slices|Slices]]]
    B --> F[[[01_Core/02_Ownership/03_Move_Semantics|Move]]]
    C --> G[[[01_Core/04_Lifetimes/02_Lifetime_Annotations|Annotations]]]
```

## üíª –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Å—ã–ª–∫–∏
```rust
fn main() {
    let s = String::from("hello");
    
    // –°–æ–∑–¥–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫
    let r1 = &s;
    let r2 = &s;
    let r3 = &s;
    
    println!("r1: {}, r2: {}, r3: {}", r1, r2, r3);
}
```

### –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Å—ã–ª–∫–∏
```rust
fn main() {
    let mut s = String::from("hello");
    
    change(&mut s);
    
    println!("{}", s); // –í—ã–≤–µ–¥–µ—Ç "hello, world"
}

fn change(some_string: &mut String) {
    some_string.push_str(", world");
}
```

### –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å—Å—ã–ª–æ–∫
```rust
fn main() {
    let mut s = String::from("hello");
    
    {
        let r1 = &mut s;
        r1.push_str(", world");
    } // r1 –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
    
    let r2 = &mut s; // –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É
    r2.push_str("!");
    
    println!("{}", s); // "hello, world!"
}
```

## üéØ –§–ª–µ—à-–∫–∞—Ä—Ç–æ—á–∫–∏

#flashcard 
Q: –°–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?
A: –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞ –≤ –æ–¥–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
<!--SR:!2024-01-20,5,280-->

#flashcard 
Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–º–µ—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∏ –∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?
A: –ù–µ—Ç, –Ω–µ–ª—å–∑—è –∏–º–µ—Ç—å –∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É, –ø–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ
<!--SR:!2024-01-22,4,265-->

#flashcard 
Q: –ß—Ç–æ —Ç–∞–∫–æ–µ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ Rust?
A: –ú–µ—Ö–∞–Ω–∏–∑–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ –≤–ª–∞–¥–µ–Ω–∏—è
<!--SR:!2024-01-25,6,290-->

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞ 1: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω—è–µ–º—ã–µ —Å—Å—ã–ª–∫–∏
```rust
// ‚ùå –û–®–ò–ë–ö–ê
let mut s = String::from("hello");
let r1 = &mut s;
let r2 = &mut s; // –û–®–ò–ë–ö–ê: –≤—Ç–æ—Ä–∞—è –∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞
println!("{}, {}", r1, r2);
```

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
```rust
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
let mut s = String::from("hello");
{
    let r1 = &mut s;
    r1.push_str(", world");
} // r1 –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
let r2 = &mut s;
r2.push_str("!");
```

### –û—à–∏–±–∫–∞ 2: –°–º–µ—à–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫
```rust
// ‚ùå –û–®–ò–ë–ö–ê
let mut s = String::from("hello");
let r1 = &s;     // –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è
let r2 = &s;     // –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è
let r3 = &mut s; // –û–®–ò–ë–ö–ê: –∏–∑–º–µ–Ω—è–µ–º–∞—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö
println!("{}, {}, and {}", r1, r2, r3);
```

**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫
```rust
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
let mut s = String::from("hello");
let r1 = &s;
let r2 = &s;
println!("{} and {}", r1, r2);
// r1 –∏ r2 –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

let r3 = &mut s;
r3.push_str(", world");
```

## üìù –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

1. **–ó–∞–¥–∞–Ω–∏–µ 1**: –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥
```rust
fn main() {
    let s = String::from("hello");
    change(&s);
}

fn change(some_string: &String) {
    some_string.push_str(", world");
}
```

2. **–ó–∞–¥–∞–Ω–∏–µ 2**: –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–µ —Å—Å—ã–ª–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—É—é

3. **–ó–∞–¥–∞–Ω–∏–µ 3**: –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –º–µ—Ç–æ–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∏–º—Å—Ç–≤—É–µ—Ç `self` –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ –∏ –∏–∑–º–µ–Ω—è–µ–º–æ

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [[01_Core/02_Ownership/01_Ownership_Rules|Ownership Rules]] - –æ—Å–Ω–æ–≤—ã –≤–ª–∞–¥–µ–Ω–∏—è
- [[01_Core/03_Borrowing/02_Mutable_References|Mutable References]] - –¥–µ—Ç–∞–ª–∏ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Å—Å—ã–ª–æ–∫
- [[01_Core/04_Lifetimes/01_Lifetime_Basics|Lifetimes]] - –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫
- [[Common Borrowing Patterns]] - –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è

---
#rust #borrowing #references #core
